<div *ngIf="isLoading" class="loading-overlay">
    <app-loading-spinner></app-loading-spinner>
</div>

<div *ngIf="!isLoading" class="gridster-container">
    <gridster [options]="gridsterOptions" style="background: transparent !important">
        <gridster-item *ngFor="let item of gridsterItems" [item]="item" [ngClass]="{ 'grid-card': item['isGrid'] }">
            <ng-container *ngIf="item['chartIndex'] !== undefined">
                <mat-card class="chart-card">
                    <ag-charts-angular [options]="options[item['chartIndex']]"></ag-charts-angular>
                </mat-card>
            </ng-container>
            <ng-container *ngIf="item['isGrid']" class="order-report-item app-grid-container">
                <div class="grid-item-content">
                    <div class="inventoryHolder">
                        <app-grid
                            [rowData]="rowData"
                            [columnDefs]="colDefs"
                            (viewInventorySummary)="onViewInventorySummary()"
                        ></app-grid>
                    </div>
                </div>
            </ng-container>
            <ng-container *ngIf="item['isMetrics']">
                <mat-card class="metrics-card">
                    <mat-card-header>
                        <mat-card-title>{{ InventoryReport.title }}</mat-card-title>
                        <mat-card-subtitle>{{ InventoryReport.subtitle }}</mat-card-subtitle>
                    </mat-card-header>
                    <mat-card-content>
                        <mat-list>
                            <mat-list-item *ngFor="let metric of InventoryReport.metrics | keyvalue">
                                <mat-icon matListItemIcon>{{ metric.value.icon }}</mat-icon>
                                <span matListItemTitle>{{ metric.value.label }}: {{ metric.value.value }}</span>
                            </mat-list-item>
                        </mat-list>
                    </mat-card-content>
                </mat-card>
            </ng-container>
        </gridster-item>
        <mat-toolbar
            style="
                position: sticky;
                top: 93%;
                left: 0;
                width: 300px;
                border-radius: 20px;
                height: 50px;
                background-color: transparent;
                z-index: 1;
            "
        >
            <button mat-flat-button class="btn" (click)="back()">
                <mat-icon style="font-size: 24px; height: 24px; width: 24px">arrow_back</mat-icon> Back To Reports
            </button>
        </mat-toolbar>
    </gridster>
</div>
